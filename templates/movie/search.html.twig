{% extends 'base.html.twig' %}

{% block body %}
    <h1>Search Movies</h1>

    <form method="get" action="{{ path('movie_search') }}">
        <input type="text" name="query" value="{{ query }}" placeholder="Search for a movie..." required>
        <button type="submit">Search</button>
    </form>

    {% if movies is not empty %}
        <h2>Search Results for "{{ query }}"</h2>
        <ul>
            {% for movie in movies %}
                <li>
                    <strong>{{ movie.title }}</strong> ({{ movie.release_date|date('Y') }})
                    <p>{{ movie.overview }}</p>
                    <form method="post" action="{{ path('movie_create') }}">
                        <input type="hidden" name="title" value="{{ movie.title }}">
                        <input type="hidden" name="description" value="{{ movie.overview }}">
                        <button type="submit">Add Movie</button>
                    </form>
                </li>
            {% endfor %}
        </ul>

        <div class="pagination">
            {% if page > 1 %}
                <a href="{{ path('movie_search', { query: query, page: page - 1 }) }}">Previous</a>
            {% endif %}

            {% if page < total_pages %}
                <a href="{{ path('movie_search', { query: query, page: page + 1 }) }}">Next</a>
            {% endif %}
        </div>
    {% endif %}
{% endblock %}
